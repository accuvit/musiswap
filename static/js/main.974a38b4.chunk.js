(this.webpackJsonpmusiswap=this.webpackJsonpmusiswap||[]).push([[0],{24:function(e,t,a){e.exports=a(51)},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(20),o=a.n(c),s=(a(29),a(2)),i=(a(30),a(10)),u=(a(31),a(3)),l=a.n(u),p=a(5),m=a(6),d=a.n(m);function f(){return(f=Object(p.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.a.request({method:"get",url:a,headers:{Authorization:"Bearer ".concat(t)}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(e){var t=e.color,a=e.rate,n=e.className,c={backgroundColor:"transparent",borderRadius:50,width:e.size||"100%",height:"40px"},o={backgroundColor:t||"transparent",width:"".concat(100*a,"%"),height:"100%",borderRadius:50,display:"flex",alignItems:"center",justifyContent:"flex-end",overflowX:"hidden"};return r.a.createElement("div",{style:c,className:n},r.a.createElement("div",{style:o,className:"neumorph"},r.a.createElement("span",{style:{fontWeight:"bold",color:"rgba(0,0,0,0.15)",fontSize:"1.5em",marginRight:"5px",textShadow:"2px 2px 1px rgba(255,255,255,0.3), -1px -1px 1px rgba(0,0,0,0.1)"}},"".concat((100*a).toFixed(0),"%"))))},b=a(21),v=a.n(b),g="AIzaSyDz4zsQw78G1PvS-LO4bSgbfrp5KlIX9ik",w=a(9);var y=function(e){var t=Object(n.useState)(),a=Object(s.a)(t,2),c=a[0],o=a[1],u=Object(n.useState)(),l=Object(s.a)(u,2),p=l[0],m=l[1],b=Object(n.useState)(),g=Object(s.a)(b,2),y=g[0],k=g[1],j=Object(n.useState)(!1),E=Object(s.a)(j,2),O=E[0],S=E[1],x=Object(n.useState)(!1),N=Object(s.a)(x,2),I=N[0],z=N[1],C=Object(n.useState)(0),L=Object(s.a)(C,2),A=L[0],B=L[1],T=Object(n.useState)([]),q=Object(s.a)(T,2),P=q[0],R=q[1],M=window.location.origin,_=e.setTracks;Object(n.useEffect)((function(){return _(P)}),[I]);var G=function e(t){(function(e,t){return f.apply(this,arguments)})((null===c||void 0===c?void 0:c.access_token)||"",t).then((function(t){var a,n=t.data;a=n.items.map((function(e){return{name:e.track.name,artist:e.track.artists[0].name}})),R((function(e){return[].concat(Object(i.a)(e),Object(i.a)(a))})),B((n.offset+n.items.length)/n.total),n.next?e(n.next):z(!1)}))};return r.a.createElement("div",{className:"spotifyRoot neumorph-in"},r.a.createElement(w.a,{className:"icon ".concat(O?"icon-out":""),size:100}),r.a.createElement("img",{src:y,height:"100px",className:"".concat(O?"avatar":""," avatar-in"),alt:p,onLoad:function(){return S(!0)}}),r.a.createElement("p",null,p?"Welcome ".concat(p,"!"):null),c?I?r.a.createElement(h,{color:"transparent",rate:A,size:"200px"}):0===P.length?r.a.createElement("button",{className:"sbutton neumorph",onClick:function(){z(!0),G("https://api.spotify.com/v1/me/tracks?offset=0&limit=50")}},"Load my liked tracks"," "):r.a.createElement("span",null,"".concat(P.length," tracks selected")):r.a.createElement(v.a,{className:"sbutton neumorph",clientId:"854299fae15c42078e103c1b1f5b6eb7",redirectUri:M,onSuccess:function(e){o(e),function(e){return d.a.request({method:"get",url:"https://api.spotify.com/v1/me",headers:{Authorization:"Bearer ".concat(e)}})}(e.access_token).then((function(e){m(e.data.display_name),k(e.data.images[0].url)}))},onFailure:function(e){return console.log(e)},scope:"user-library-read"},"Login Spotify"))};a(50);function k(e,t){var a=encodeURIComponent(t),n="https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=1&order=relevance&q=".concat(a,"&safeSearch=none&type=video&key=").concat(g);return d.a.request({method:"GET",url:n,headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"}})}function j(e,t,a){return E.apply(this,arguments)}function E(){return(E=Object(p.a)(l.a.mark((function e(t,a,n){var r,c,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(a.artist," ").concat(a.name),e.next=3,k(t,r);case 3:return c=e.sent,o=c.data.items[0].id.videoId,e.next=7,O(t,o,n);case 7:return s=e.sent,e.abrupt("return",s.data);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t,a){var n="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&key=".concat(g);return d.a.request({method:"POST",url:n,headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"},data:{snippet:{playlistId:a,resourceId:{kind:"youtube#video",videoId:t}}}})}function S(e,t){var a="https://www.googleapis.com/youtube/v3/playlists?part=snippet%2Cstatus&key=".concat(g);return d.a.request({method:"POST",url:a,headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"},data:{snippet:{title:t,description:"Converted playlist from Spotify",tags:["API Call","Musiswap","Music"]},privacyStatus:"public"}})}var x=a(22);var N=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(),u=Object(s.a)(i,2),m=u[0],d=u[1],f=Object(n.useState)(),h=Object(s.a)(f,2),b=h[0],v=h[1],g=Object(n.useState)(!1),y=Object(s.a)(g,2),k=y[0],E=y[1],O=function(){var t=Object(p.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"Musiswap",a=e.tracks,t.next=4,S(c,"Musiswap").then(function(){var t=Object(p.a)(l.a.mark((function t(n){var r,o,s,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.data.id,o=a.length,s=l.a.mark((function t(n){var s,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=parseInt(n),e.setLoadingStats((function(){return{rate:s/o,label:"Loading ".concat(a[s].artist," - ").concat(a[s].name)}})),t.next=4,j(c,a[n],r);case 4:i=t.sent,console.log(i);case 6:case"end":return t.stop()}}),t)})),t.t0=l.a.keys(a);case 4:if((t.t1=t.t0()).done){t.next=9;break}return i=t.t1.value,t.delegateYield(s(i),"t2",7);case 7:t.next=4;break;case 9:e.setLoadingStats((function(){return{rate:1,label:'Complete! Check your "Musiswap" playlist on YouTube!'}}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.setLoadingStats((function(e){return{rate:(null===e||void 0===e?void 0:e.rate)||0,label:"For some reason the loading failed, try again later"}}))}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"youtube-root neumorph-in"},r.a.createElement(w.b,{className:"icon-youtube ".concat(k?"icon-out":""),size:100}),r.a.createElement("img",{src:b,height:"100px",className:"".concat(k?"avatar":""," avatar-in"),alt:null===m||void 0===m?void 0:m.name,onLoad:function(){return E(!0)}}),r.a.createElement("p",null,m?"You're set, ".concat(m.givenName):null),c?e.tracks.length>0?r.a.createElement("button",{className:"loginButton neumorph",onClick:O},"Import selected tracks"):r.a.createElement("div",null):r.a.createElement(x.GoogleLogin,{clientId:"230448497881-97p4dipujfsu8i5ehqbbte2rmsl9e1p2.apps.googleusercontent.com",onSuccess:function(e){d(e.profileObj),o(e.accessToken||e.code),v(e.profileObj.imageUrl)},onFailure:function(e){console.log(e)},isSignedIn:!1,cookiePolicy:"single_host_origin",render:function(e){return r.a.createElement("button",{className:"loginButton neumorph",onClick:e.onClick},"Login Google")},scope:"https://www.googleapis.com/auth/youtube"}))},I=a(23);var z=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(),i=Object(s.a)(o,2),u=i[0],l=i[1];return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"infoDiv"},r.a.createElement("a",{href:"https://github.com/accuvit/musiswap/blob/develop/USERGUIDE.md",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(I.a,{className:"icon",size:"3em",color:"rgba(255,255,255,0.4)"}))),u&&r.a.createElement("div",{className:"loadingBar"},r.a.createElement("span",{className:"loadingTxt"},u.label),r.a.createElement(h,{rate:u.rate,size:"60vw"})),r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"spotify halfPart"},r.a.createElement(y,{setTracks:c})),r.a.createElement("div",{className:"youtube halfPart"},r.a.createElement(N,{tracks:a,setLoadingStats:l}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.974a38b4.chunk.js.map